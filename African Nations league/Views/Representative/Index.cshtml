@model RepresentativeDashboardViewModel
@{
    ViewData["Title"] = "Representative Dashboard";
    // helpers local
    string displayTeamName = Model.User?.TeamName ?? Model.Team?.TeamName ?? "No team assigned";
    string displayFlag =  Model.User?.TeamFlag ?? Url.Content("~/images/default-flag.png");
    double? displayRating =  Model.User?.TeamRating;
    int displayPlayersCount =  Model.User?.Squad?.Count ?? 0;
}

<div class="row">
    <div class="col-md-3">
        @await Html.PartialAsync("_RepMenu")
    </div>
    <div class="col-md-9">
        <h2>Welcome, @Model.User?.FullName</h2>

        <div class="card mb-3">
            <div class="card-body d-flex align-items-center">
                <img src="@displayFlag"
                     alt="@displayTeamName"
                     style="width:80px;height:50px;margin-right:15px" />

                <div>
                    <h4>@displayTeamName</h4>
                    <div>Team rating: @(displayRating.HasValue? displayRating.Value.ToString("F1") : "-")</div>
                    <div>Players: @displayPlayersCount</div>
                </div>
            </div>
        </div>

        <h4>Profile</h4>
        <div class="card">
            <div class="card-body">
                <p><strong>Name:</strong> @Model.User?.FullName</p>
                <p><strong>Email:</strong> @Model.User?.Email</p>
                <p><strong>Phone:</strong> @Model.User?.PhoneNumber</p>
                <p><strong>Manager:</strong> @Model.User?.ManagerName</p>
                <p><strong>Team selected:</strong> @(Model.User?.TeamName ?? "<em>No team selected</em>")</p>

                <p>
                    <a asp-controller="Representative" asp-action="Profile" class="btn btn-sm btn-outline-primary">Edit profile</a>
                    <a asp-controller="Representative" asp-action="Teams" class="btn btn-sm btn-outline-secondary">View all teams</a>
                </p>
            </div>
        </div>
    </div>
</div>